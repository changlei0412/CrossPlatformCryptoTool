<!-- Views/MainWindow.axaml -->
<Window xmlns="https://github.com/avaloniaui"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 xmlns:vm="using:CrossPlatformCryptoTool.ViewModels"
 xmlns:models="using:CrossPlatformCryptoTool.Models"
 x:Class="CrossPlatformCryptoTool.Views.MainWindow"
 x:DataType="vm:MainWindowViewModel"
 Title="è·¨å¹³å°åŠ å¯†å·¥å…· - Cross Platform Crypto Tool"
 Width="1000" Height="700"
 MinWidth="800" MinHeight="500"
 WindowStartupLocation="CenterScreen">

	<Design.DataContext>
		<vm:MainWindowViewModel />
	</Design.DataContext>

	<Window.Styles>
		<Style Selector="TextBlock.card-header">
			<Setter Property="FontSize" Value="18" />
			<Setter Property="FontWeight" Value="SemiBold" />
			<Setter Property="Margin" Value="0,0,0,8" />
		</Style>

		<Style Selector="Button.primary">
			<Setter Property="Background" Value="#0078D4" />
			<Setter Property="Foreground" Value="White" />
			<Setter Property="Padding" Value="12,8" />
			<Setter Property="CornerRadius" Value="6" />
			<Setter Property="FontWeight" Value="SemiBold" />
		</Style>

		<Style Selector="Button.ghost">
			<Setter Property="Background" Value="Transparent" />
			<Setter Property="BorderBrush" Value="#0078D4" />
			<Setter Property="BorderThickness" Value="1" />
			<Setter Property="Foreground" Value="#0078D4" />
			<Setter Property="Padding" Value="10,6" />
			<Setter Property="CornerRadius" Value="6" />
		</Style>

		<Style Selector="Border.card">
			<!-- Use transparent so theme backgrounds show through -->
			<Setter Property="Background" Value="Transparent" />
			<Setter Property="Padding" Value="16" />
			<Setter Property="CornerRadius" Value="8" />
			<Setter Property="Margin" Value="0,0,0,12" />
			<Setter Property="BorderBrush" Value="#FFE6EAF2" />
			<Setter Property="BorderThickness" Value="1" />
		</Style>
	</Window.Styles>

	<!-- Remove hard-coded grid background so theme controls appearance -->
	<Grid Margin="18">
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="320" />
			<ColumnDefinition Width="*" />
		</Grid.ColumnDefinitions>

		<!-- Left column: settings and actions -->
		<ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
			<StackPanel>
				<Border Classes="card">
					<StackPanel>
						<TextBlock Text="ç®—æ³•ä¸Žå‚æ•°" Classes="card-header" />

						<StackPanel Spacing="8">
							<TextBlock Text="åŠ å¯†ç®—æ³•" />
							<ComboBox ItemsSource="{Binding Algorithms}" SelectedItem="{Binding SelectedAlgorithm}" />

							<TextBlock Text="å¯†é’¥é•¿åº¦" IsVisible="{Binding IsNotHashingAlgorithm}" />
							<ComboBox ItemsSource="{Binding KeySizes}" SelectedItem="{Binding SelectedKeySize}" IsVisible="{Binding IsNotHashingAlgorithm}" />

							<TextBlock Text="æ¨¡å¼" IsVisible="{Binding IsNotHashingAlgorithm}" />
							<ComboBox ItemsSource="{Binding Modes}" SelectedItem="{Binding SelectedMode}" IsVisible="{Binding IsNotHashingAlgorithm}" />

							<StackPanel Orientation="Horizontal" VerticalAlignment="Center" Spacing="8" Margin="0,6,0,0">
								<CheckBox Content="Base64 è¾“å‡º" IsChecked="{Binding OutputBase64}" IsVisible="{Binding IsNotHashingAlgorithm}" />
							</StackPanel>
						</StackPanel>
					</StackPanel>
				</Border>

				<Border Classes="card">
					<StackPanel>
						<TextBlock Text="å¯†é’¥ä¸Žå‘é‡" Classes="card-header" />
						<StackPanel Spacing="8">
							<TextBlock Text="å¯†é’¥ (Key)" />
							<TextBox Text="{Binding Key}" Watermark="è¾“å…¥å¯†é’¥æˆ–ç•™ç©ºè‡ªåŠ¨ç”Ÿæˆ" />
							<Button Content="ç”Ÿæˆéšæœºå¯†é’¥" Command="{Binding GenerateRandomKeyCommand}" Classes="ghost" />

							<TextBlock Text="å‘é‡ (IV)" Margin="0,8,0,0" />
							<TextBox Text="{Binding IV}" Watermark="è¾“å…¥å‘é‡æˆ–ç•™ç©ºè‡ªåŠ¨ç”Ÿæˆ" />
							<Button Content="ç”ŸæˆéšæœºIV" Command="{Binding GenerateRandomIVCommand}" Classes="ghost" />
						</StackPanel>
					</StackPanel>
				</Border>

				<Border Classes="card">
					<StackPanel>
						<TextBlock Text="æ“ä½œ" Classes="card-header" />
						<StackPanel Orientation="Vertical" Spacing="8">
							<Button Content="ðŸ”’ åŠ å¯†" Command="{Binding EncryptCommand}" Classes="primary" />
							<Button Content="ðŸ—ï¸ è§£å¯†" Command="{Binding DecryptCommand}" Classes="primary" />
							<StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Stretch">
								<Button Content="ðŸ”äº¤æ¢æ–‡æœ¬" Command="{Binding SwapTextCommand}" Classes="ghost" HorizontalAlignment="Stretch" />
								<Button Content="ðŸ§¹ æ¸…é™¤" Command="{Binding ClearCommand}" Classes="ghost" HorizontalAlignment="Stretch" />
							</StackPanel>
						</StackPanel>
					</StackPanel>
				</Border>

				<Border Classes="card">
					<StackPanel>
						<TextBlock Text="è¯´æ˜Ž" Classes="card-header" />
						<TextBlock TextWrapping="Wrap" Foreground="#666">
							<Run Text="ä½¿ç”¨è¯´æ˜Ž:" FontWeight="Bold" />
							<LineBreak />
							<Run Text="â€¢ AES/SM4: å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œéœ€è¦å¯†é’¥å’ŒIV" />
							<LineBreak />
							<Run Text="â€¢ SHA256/SHA512/SM3: å“ˆå¸Œç®—æ³•ï¼Œä¸å¯é€†ï¼Œä¸éœ€è¦å¯†é’¥" />
							<LineBreak />
							<Run Text="â€¢ æ”¯æŒWindowsã€macOSã€Linuxå¹³å°" />
						</TextBlock>
					</StackPanel>
				</Border>
			</StackPanel>
		</ScrollViewer>

		<!-- Right column: input and output panels -->
		<StackPanel Grid.Column="1" Margin="18,0,0,0">
			<Border Classes="card">
				<StackPanel>
					<TextBlock Text="è¾“å…¥ï¼ˆæ˜Žæ–‡æˆ–å¯†æ–‡ï¼‰" Classes="card-header" />
					<TextBox Text="{Binding InputText}" AcceptsReturn="True" TextWrapping="Wrap" Height="220" FontSize="14" />
				</StackPanel>
			</Border>

			<Border Classes="card">
				<StackPanel>
					<TextBlock Text="è¾“å‡º" Classes="card-header" />
					<TextBox Text="{Binding OutputText}" AcceptsReturn="True" TextWrapping="Wrap" Height="200" FontSize="14" IsReadOnly="True" />

					<StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0" Spacing="8">
						<Button Content="ðŸ“‹å¤åˆ¶è¾“å‡º" Command="{Binding CopyOutputCommand}" Classes="ghost" />
						<Button Content="ðŸ’¾ ä¿å­˜åˆ°æ–‡ä»¶" Command="{Binding SaveOutputCommand}" Classes="ghost" />
						<Button Content="ðŸŒ“ åˆ‡æ¢ä¸»é¢˜" Command="{Binding ToggleThemeCommand}" Classes="ghost" />
					</StackPanel>
				</StackPanel>
			</Border>

			<!-- Status at bottom (prominent) -->
			<TextBlock Text="{Binding StatusMessage}" Foreground="{Binding StatusBrush}" FontWeight="{Binding StatusFontWeight}" Margin="4" />
		</StackPanel>
	</Grid>
</Window>